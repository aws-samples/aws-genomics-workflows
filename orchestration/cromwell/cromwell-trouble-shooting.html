



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-3.1.0">
    
    
      
        <title>Trouble Shooting - Genomics Workflows on AWS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.11e41852.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#cromwell-troubleshooting" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../index.html" title="Genomics Workflows on AWS" class="md-header-nav__button md-logo">
          
            <img src="../../images/AWS_logo_RGB_REV.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Genomics Workflows on AWS
              </span>
              <span class="md-header-nav__topic">
                Trouble Shooting
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/aws-samples/aws-genomics-workflows/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Contribute
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="Genomics Workflows on AWS" class="md-nav__button md-logo">
      
        <img src="../../images/AWS_logo_RGB_REV.svg" width="48" height="48">
      
    </a>
    Genomics Workflows on AWS
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/aws-samples/aws-genomics-workflows/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Contribute
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../index.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../disclaimer.html" title="Disclaimer" class="md-nav__link">
      Disclaimer
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../quick-start.html" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Core Environment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Core Environment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/introduction.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/create-s3-bucket.html" title="Data Storage" class="md-nav__link">
      Data Storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/create-iam-roles.html" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/create-custom-compute-resources.html" title="Compute Resources" class="md-nav__link">
      Compute Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/setup-aws-batch.html" title="AWS Batch" class="md-nav__link">
      AWS Batch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/custom-deploy.html" title="Customized Deployment" class="md-nav__link">
      Customized Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core-env/build-custom-distribution.html" title="Building a Custom Distribution" class="md-nav__link">
      Building a Custom Distribution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Workflow Orchestration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Workflow Orchestration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../orchestration-intro.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      AWS Step Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        AWS Step Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../step-functions/step-functions-overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3" checked>
    
    <label class="md-nav__link" for="nav-5-3">
      Cromwell
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Cromwell
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="cromwell-overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="cromwell-examples.html" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Trouble Shooting
      </label>
    
    <a href="cromwell-trouble-shooting.html" title="Trouble Shooting" class="md-nav__link md-nav__link--active">
      Trouble Shooting
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#s3-access-denied-403" title="S3 Access Denied (403)" class="md-nav__link">
    S3 Access Denied (403)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions" title="Suggested Solution(s)" class="md-nav__link">
    Suggested Solution(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#s3-file-not-found-404" title="S3 File Not Found (404)" class="md-nav__link">
    S3 File Not Found (404)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_1" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_1" title="Suggested Solution(s)" class="md-nav__link">
    Suggested Solution(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-server-outofmemory-errors" title="Cromwell Server OutOfMemory errors" class="md-nav__link">
    Cromwell Server OutOfMemory errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_2" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_2" title="Suggested Solutions" class="md-nav__link">
    Suggested Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-task-container-outofmemory-errors" title="Cromwell Task (Container) OutOfMemory errors" class="md-nav__link">
    Cromwell Task (Container) OutOfMemory errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_3" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_3" title="Suggested solutions" class="md-nav__link">
    Suggested solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-submitted-aws-batch-jobs-hang-in-runnable-state" title="Cromwell submitted AWS Batch jobs hang in 'Runnable' state" class="md-nav__link">
    Cromwell submitted AWS Batch jobs hang in 'Runnable' state
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_4" title="Possible Causes" class="md-nav__link">
    Possible Causes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_4" title="Suggested solutions" class="md-nav__link">
    Suggested solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Nextflow
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Nextflow
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../nextflow/nextflow-overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nextflow/nextflow-trouble-shooting.html" title="Trouble Shooting" class="md-nav__link">
      Trouble Shooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cost-effective-workflows/cost-effective-workflows.html" title="Cost Effective Workflows" class="md-nav__link">
      Cost Effective Workflows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#s3-access-denied-403" title="S3 Access Denied (403)" class="md-nav__link">
    S3 Access Denied (403)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions" title="Suggested Solution(s)" class="md-nav__link">
    Suggested Solution(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#s3-file-not-found-404" title="S3 File Not Found (404)" class="md-nav__link">
    S3 File Not Found (404)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_1" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_1" title="Suggested Solution(s)" class="md-nav__link">
    Suggested Solution(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-server-outofmemory-errors" title="Cromwell Server OutOfMemory errors" class="md-nav__link">
    Cromwell Server OutOfMemory errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_2" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_2" title="Suggested Solutions" class="md-nav__link">
    Suggested Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-task-container-outofmemory-errors" title="Cromwell Task (Container) OutOfMemory errors" class="md-nav__link">
    Cromwell Task (Container) OutOfMemory errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_3" title="Possible Cause(s)" class="md-nav__link">
    Possible Cause(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_3" title="Suggested solutions" class="md-nav__link">
    Suggested solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cromwell-submitted-aws-batch-jobs-hang-in-runnable-state" title="Cromwell submitted AWS Batch jobs hang in 'Runnable' state" class="md-nav__link">
    Cromwell submitted AWS Batch jobs hang in 'Runnable' state
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-causes_4" title="Possible Causes" class="md-nav__link">
    Possible Causes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suggested-solutions_4" title="Suggested solutions" class="md-nav__link">
    Suggested solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/aws-genomics-workflows/edit/master/docs/orchestration/cromwell/cromwell-trouble-shooting.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="cromwell-troubleshooting">Cromwell Troubleshooting</h1>
<p>The following are some common errors that we have seen and suggested solutions</p>
<h2 id="s3-access-denied-403">S3 Access Denied (403)</h2>
<h3 id="possible-causes">Possible Cause(s)</h3>
<p>A 403 error from S3 indicates that Cromwell is trying to access an S3 object
that it doesn't have permission to.
Following the priciple of "least access" Cromwell uses an IAM EC2 instance role
that grants it read and write access to the S3 bucket you specified in the
CloudFormation deployment and read only access to the <code>gatk-test-data</code>
and <code>broad-references</code> S3 buckets.
If your workflow references other S3 objects (<strong>even ones in your account</strong>)
you will need to allow this via changes to the IAM role. Similarly if a step in
your workflow attempts to write to another bucket you will need to add
the appropriate permissions.</p>
<h3 id="suggested-solutions">Suggested Solution(s)</h3>
<ul>
<li>Add read access to additional buckets by attaching a policy to the Cromwell
 server's IAM EC2 instance role with content similar to:</li>
</ul>
<pre><code class="language-JSON">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;s3:GetObject&quot;,
                &quot;s3:ListBucket&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:s3:::bucket-a&quot;,
                &quot;arn:aws:s3:::bucket-a/*&quot;,
                &quot;arn:aws:s3:::another-bucket&quot;,
                &quot;arn:aws:s3:::another-bucket/*&quot;
            ]
        }
    ]
}
</code></pre>
<p>The exact name of the role will be unique and generated by CloudFormation,
however it will contain the words "CromwellServer" and it will be the role attached
to the EC2 running the Cromwell server.</p>
<h2 id="s3-file-not-found-404">S3 File Not Found (404)</h2>
<h3 id="possible-causes_1">Possible Cause(s)</h3>
<ul>
<li>A file required by the workflow cannot be found at the
specified S3 Path. Your workflow inputs might have the incorrect path OR an
expected file was not created by the previous step.</li>
</ul>
<h3 id="suggested-solutions_1">Suggested Solution(s)</h3>
<ul>
<li>Check the paths of inputs and that the expected file exists at that path.</li>
<li>If the file name is something like <code>&lt;previousTaskName&gt;-rc.txt</code> the previous task
failed before it was able to write out the result code. Inspect the <code>stderr.txt</code>
and <code>stdout.txt</code> of the previous step for possible reasons.</li>
</ul>
<h2 id="cromwell-server-outofmemory-errors">Cromwell Server OutOfMemory errors</h2>
<h3 id="possible-causes_2">Possible Cause(s)</h3>
<ul>
<li>Out of memory errors on the Cromwell Server are typically the result of the JVM running
out of memory while attempting to keep track of multiple workflows or workflows with very
large scatter steps. </li>
</ul>
<h3 id="suggested-solutions_2">Suggested Solutions</h3>
<ul>
<li>Consider upgrading the server instance type to one with more RAM.</li>
<li>Investigate tuning <a href="https://github.com/broadinstitute/cromwell/blob/9249537fd094c6979b0c64e99fcc90d48c861487/core/src/main/resources/reference.conf#L543-L572">Cromwell's <code>job-control</code> limits</a> 
to find a configuration that appropriately restricts the number of queued Akka messages.</li>
<li>Consider increasing the maximum instance RAM available to the JVM. Our Cloudformation templates 
this set to 85% (<code>-XX:MaxRAMPercentage=85.0</code>) allowing some head room for the OS. 
On larger instance types you may be able to increase this further.</li>
<li>Ensure you are <em>not</em> using an in memory database on the server instance. Our cloudformation templates configure
 a separate Aurora MySQL cluster to avoid this. </li>
</ul>
<h2 id="cromwell-task-container-outofmemory-errors">Cromwell Task (Container) OutOfMemory errors</h2>
<h3 id="possible-causes_3">Possible Cause(s)</h3>
<ul>
<li>Individual tasks from a workflow run in docker containers on AWS Batch. If those containers
 have insufficient RAM for the task they can fail.</li>
<li>Some older applications (including older versions of the JVM) do not always respect the memory
 limits imposed by the container and may think they have resources they cannot use.</li>
</ul>
<h3 id="suggested-solutions_3">Suggested solutions</h3>
<ul>
<li>Assign more memory to the task in the <code>runtime: {}</code> stanza of the WDL or if the task application
 allows use command line or configuration parameters to appropriately limit memory.</li>
<li>For tasks executed by the JVM investigate <code>-Xmx</code> and <code>-XX:MaxRAMPercentage</code> parameters.</li>
</ul>
<h2 id="cromwell-submitted-aws-batch-jobs-hang-in-runnable-state">Cromwell submitted AWS Batch jobs hang in 'Runnable' state</h2>
<h3 id="possible-causes_4">Possible Causes</h3>
<ul>
<li>The resources requested by the task exceed the largest size of instance available in your AWS Batch Compute Environment</li>
<li>Batch worker EC2 instances are not able to join the Compute Environments ECS cluster</li>
</ul>
<h3 id="suggested-solutions_4">Suggested solutions</h3>
<ul>
<li>Reduce the resources required by your task to less than the maximum CPU and memory of the largest instance type allowed
in your Batch Compute Environment.</li>
<li>In your EC2 console determine if any gwf-core workers have started. If they have then ensure they have a route to the 
internet (for example, does your subnet have a NAT gateway). Worker nodes require access to the internet so that required 
dependencies can be downloaded by the worker nodes at startup time. If this process fails then Docker will not start, the 
ecs-agent will not run, and the systems manager will also not run. In addition, the node will also not be able to 
communicate with the AWS Batch service.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="cromwell-examples.html" title="Examples" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Examples
              </span>
            </div>
          </a>
        
        
          <a href="../nextflow/nextflow-overview.html" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2019 Amazon Web Services
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.9e1f3b71.js"></script>
      
      <script>app.initialize({version:"1.3.0",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>